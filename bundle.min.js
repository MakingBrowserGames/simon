!function e(t,n,i){function a(s,r){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!r&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return a(n?n:e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=e("./states/boot"),o=i(a),s=e("./states/gameover"),r=i(s),u=e("./states/menu"),c=i(u),l=e("./states/preloader"),h=i(l),f=e("./states/simonsays"),d=i(f),g=new Phaser.Game(window.innerWidth,window.innerHeight,Phaser.AUTO,"simon-game");g.state.add("boot",new o.default),g.state.add("gameover",new r.default),g.state.add("menu",new c.default),g.state.add("preloader",new h.default),g.state.add("simonsays",new d.default),g.state.start("boot")},{"./states/boot":5,"./states/gameover":6,"./states/menu":7,"./states/preloader":8,"./states/simonsays":9}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(e){function t(e,n,o,s,r){i(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,e,n,o,s,r));return u.font="Permanent Marker",u.fontSize=60,u.padding.set(10,16),u.stroke="#000000",u.strokeThickness=8,u.fill="pink",u.setShadow(5,5,"rgba(0,0,0,0.5)",5),u}return o(t,e),t}(Phaser.Text);n.default=s},{}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.game=t,this.ready=!1,this.clouds=this.game.add.tileSprite(0,0,this.game.width,this.game.cache.getImage("clouds").height,"clouds"),this.mountainsBack=this.game.add.tileSprite(0,this.game.height-this.game.cache.getImage("mountains-back").height,this.game.width,this.game.cache.getImage("mountains-back").height,"mountains-back"),this.mountainsMid1=this.game.add.tileSprite(0,this.game.height-this.game.cache.getImage("mountains-mid1").height,this.game.width,this.game.cache.getImage("mountains-mid1").height,"mountains-mid1"),this.clouds2=this.game.add.tileSprite(0,0,this.game.width,this.game.cache.getImage("clouds").height,"clouds"),this.clouds2.tileScale.setTo(-.5,.5),this.mountainsMid2=this.game.add.tileSprite(0,this.game.height-this.game.cache.getImage("mountains-mid2").height,this.game.width,this.game.cache.getImage("mountains-mid2").height,"mountains-mid2"),this.ready=!0}return a(e,[{key:"update",value:function(){this.ready&&(this.mountainsBack.tilePosition.x-=.05,this.mountainsMid1.tilePosition.x-=.3,this.mountainsMid2.tilePosition.x-=.75,this.clouds.tilePosition.x+=.1,this.clouds2.tilePosition.x+=.5)}},{key:"paused",value:function(){}},{key:"shutdown",value:function(){}}]),e}();n.default=o},{}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){function t(e,n,o,s){i(this,t);var r=a(this,Object.getPrototypeOf(t).call(this,e,n,o,"simon",s));r.buttons={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_RIGHT:"BOTTOM_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT"},r.actions={TOP_LEFT:r.topLeft,TOP_RIGHT:r.topRight,BOTTOM_RIGHT:r.bottomRight,BOTTOM_LEFT:r.bottomLeft},r.actionsSounds={TOP_LEFT:r.game.add.sound("track1"),TOP_RIGHT:r.game.add.sound("track2"),BOTTOM_RIGHT:r.game.add.sound("track3"),BOTTOM_LEFT:r.game.add.sound("track4")},r.anchor.setTo(.5,.5),r.timer=r.game.time.create(!1),r.timer.start(),r.inputEnabled=!0,r.buttonSignal=new Phaser.Signal,r.buttonSignal.add(function(e){console.log("button pressed",e)},r);var u=Math.floor(r.width/2),c=Math.floor(r.height/2),l=r.game.add.renderTexture(u,c,"button");return r.buttonSprites={TOP_LEFT:r.game.add.image(-u,-c,l),TOP_RIGHT:r.game.add.image(0,-c,l),BOTTOM_RIGHT:r.game.add.image(0,0,l),BOTTOM_LEFT:r.game.add.image(-u,0,l)},Object.keys(r.buttonSprites).forEach(function(e){var t=this,n=this.buttonSprites[e];n.inputEnabled=!0,n.anchor.setTo(0),n.events.onInputDown.add(function(){t.play(e),t.buttonSignal.dispatch(e)},this),this.addChild(n)},r),r}return o(t,e),s(t,[{key:"getAction",value:function(e){var t=this;return Object.keys(this.buttons).filter(function(n){return e==t.buttons[n]}).map(function(e){return t.actions[e]}).shift()}},{key:"onTap",value:function(e){console.log("tap!",e,e.position)}},{key:"play",value:function(e){var t,n=this.buttons;switch(e){case n.TOP_LEFT:t=1;break;case n.TOP_RIGHT:t=2;break;case n.BOTTOM_RIGHT:t=3;break;case n.BOTTOM_LEFT:t=4;break;default:t=0}this.frame=t,this.actionsSounds[e].play(),this.outGoTheLights()}},{key:"topLeft",value:function(){this.frame=1,this.outGoTheLights()}},{key:"topRight",value:function(){this.frame=2,this.outGoTheLights()}},{key:"bottomRight",value:function(){this.frame=3,this.outGoTheLights()}},{key:"bottomLeft",value:function(){this.frame=4,this.outGoTheLights()}},{key:"outGoTheLights",value:function(){var e=this;this.timer.removeAll(),this.timer.add(1500,function(){e.frame=0})}},{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.Sprite);n.default=r},{}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).call(this))}return o(t,e),s(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0),this.initGlobalVariables(),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={score:0}}}]),t}(Phaser.State);n.default=r},{}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("../prefabs/NiceText"),c=i(u),l=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).call(this))}return s(t,e),r(t,[{key:"create",value:function(){var e=this.game.add.tileSprite(0,0,this.game.width,this.game.height,"city-bg");e.tileScale.setTo(this.game.world.height/e.texture.height),this.game.add.sound("perdiste").play(),this.gameoverText=new c.default(this.game,this.game.world.centerX,32,"Game Over!"),this.gameoverText.fontSize=90,this.gameoverText.anchor.setTo(.5,0),this.game.add.existing(this.gameoverText),this.scoreText=new c.default(this.game,this.game.world.centerX,this.gameoverText.bottom,"Score = "+this.game.global.score),this.game.add.existing(this.scoreText),this.scoreText.anchor.set(.5,0),this.input.onDown.add(this.onInputDown,this),this.canContinueToNextState=!1,this.game.time.events.add(.5*Phaser.Timer.SECOND,function(){this.canContinueToNextState=!0},this),this.saveVarsToLocalStorage(),this.resetGlobalVariables(),this.cityBackground=e}},{key:"saveVarsToLocalStorage",value:function(){var e=localStorage.maxScore||0;this.game.global.score>e&&(localStorage.maxScore=this.game.global.score)}},{key:"resetGlobalVariables",value:function(){this.game.global.score=0}},{key:"update",value:function(){this.cityBackground.tilePosition.x-=.1}},{key:"onInputDown",value:function(){this.canContinueToNextState&&this.game.state.start("menu")}}]),t}(Phaser.State);n.default=l},{"../prefabs/NiceText":2}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("../prefabs/ParalaxMountains"),c=i(u),l=e("../prefabs/NiceText"),h=i(l),f=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).call(this))}return s(t,e),r(t,[{key:"getHeader",value:function(e){var t=new h.default(this.game,this.game.world.centerX,this.game.world.centerY,e);return t.anchor.set(.5,.5),this.game.add.existing(t),t}},{key:"create",value:function(){this.game.stage.backgroundColor="#697e96",this.mountains=new c.default(this.game),this.ready=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"text_ready"),this.ready.anchor.set(.5,.5),this.ready.visible=!1,this.go=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"text_go"),this.go.anchor.set(.5,.5),this.go.visible=!1,this.menuText=this.getHeader("Oli, Hace lo que te digo"),this.input.onDown.add(this.justFuckingStart,this),this.canContinueToNextState=!0}},{key:"update",value:function(){this.mountains.update()}},{key:"justFuckingStart",value:function(){this.game.state.start("simonsays")}}]),t}(Phaser.State);n.default=f},{"../prefabs/NiceText":2,"../prefabs/ParalaxMountains":3}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).call(this))}return o(t,e),s(t,[{key:"preload",value:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources(),this.game.load.start()}},{key:"loadResources",value:function(){this.game.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"),this.game.load.image("clouds","assets/nuvens__2_.png"),this.game.load.image("mountains-back","assets/mountains-back.png"),this.game.load.image("mountains-mid1","assets/mountains-mid1.png"),this.game.load.image("mountains-mid2","assets/mountains-mid2.png"),this.game.load.image("city-bg","assets/city_background_night.png"),this.game.load.spritesheet("simon","assets/simon.png",170,170),this.game.load.audio("track1","assets/track1.mp3"),this.game.load.audio("track2","assets/track2.mp3"),this.game.load.audio("track3","assets/track3.mp3"),this.game.load.audio("track4","assets/track4.mp3"),this.game.load.audio("perdiste","assets/perdiste.wav")}},{key:"onLoadComplete",value:function(){var e=this;WebFont.load({google:{families:["Permanent Marker","Creepster"]},active:function(){console.log("preloading complete"),e.game.state.start("menu")}})}}]),t}(Phaser.State);n.default=r},{}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("../prefabs/Simon"),c=i(u),l=e("../prefabs/ParalaxMountains"),h=i(l),f=function(e){function t(e,n){return a(this,t),o(this,Object.getPrototypeOf(t).call(this,e,n))}return s(t,e),r(t,[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this;this.bg=new h.default(this.game,this.game.world),this.simon=new c.default(this.game,this.game.world.centerX,this.game.world.centerY),this.simon.scale.set(2),this.game.add.existing(this.simon),this.keys=this.game.input.keyboard.addKeys({TOP_LEFT:Phaser.KeyCode.Q,TOP_RIGHT:Phaser.KeyCode.E,BOTTOM_LEFT:Phaser.KeyCode.A,BOTTOM_RIGHT:Phaser.KeyCode.D}),this.keys.TOP_LEFT.onDown.add(function(){return e.onButton("TOP_LEFT")}),this.keys.TOP_RIGHT.onDown.add(function(){return e.onButton("TOP_RIGHT")}),this.keys.BOTTOM_RIGHT.onDown.add(function(){return e.onButton("BOTTOM_RIGHT")}),this.keys.BOTTOM_LEFT.onDown.add(function(){return e.onButton("BOTTOM_LEFT")}),this.simon.buttonSignal.removeAll(),this.simon.buttonSignal.add(function(t){e.onButton(t)},this),this.score=this.game.add.text(0,0,"Score: 0"),this.score.font="Permanent Marker",this.score.fontSize=60,this.score.padding.set(10,16),this.score.stroke="#000000",this.score.strokeThickness=2,this.score.setShadow(5,5,"rgba(0,0,0,0.5)",5),this.score.anchor.set(0),this.statusText=this.add.text(this.game.world.width,0,"WAIT",{font:"Permanent Marker",fill:"#ffffff",align:"left"}),this.statusText.anchor.set(1,0),this.statusText.font="Permanent Marker",this.statusText.fontSize=60,this.statusText.padding.set(10,16),this.statusText.stroke="#000000",this.statusText.strokeThickness=2,this.statusText.setShadow(5,5,"rgba(0,0,0,0.5)",5),this.actionSequence=[],this.timer=this.game.time.create(!1),this.timer.start(),this.nextTurn(!0)}},{key:"onButton",value:function(e){var t=this;if(console.log("Button: ",e),this.simon.play(e),this.currentlyPlaying.length>0){var n=this.currentlyPlaying.shift();e==n?(console.log("its a match"),this.finishedSequence()&&(this.incScore(10),this.timer.add(2e3,function(){t.nextTurn(!0)}))):(this.timer.add(2e3,function(){t.state.start("gameover")}),console.log("you suck!"))}}},{key:"finishedSequence",value:function(){return 0==this.currentlyPlaying.length}},{key:"readnput",value:function(){console.log("your turn!"),this.score.style.fill="#ffffff",this.statusText.setText("TU TURNO!"),this.currentlyPlaying=this.actionSequence.slice(),this.game.input.enabled=!0}},{key:"nextTurn",value:function(e){var t=new Phaser.Signal,n=this;this.statusText.setText("ESPERA"),e&&this.generateNewAction(),t.addOnce(function(){n.readnput()},n),this.playSequence(t)}},{key:"generateNewAction",value:function(){this.actionSequence.push(this.randomButton()),this.score.text="Score: "+this.game.global.score}},{key:"incScore",value:function(e){this.game.global.score+=e}},{key:"playSequence",value:function(e){console.log(this.actionSequence),this.game.input.enabled=!1,this.score.style.fill="red",this.currentlyPlaying=this.actionSequence.slice(),this.playNext(e)}},{key:"playNext",value:function(e){if(this.currentlyPlaying.length>0){var t=this,n=this.currentlyPlaying.shift();this.simon.play(n),this.timer.add(1500,function(){t.playNext(e)},t)}else e.dispatch()}},{key:"update",value:function(){this.bg.update()}},{key:"randomButton",value:function(){var e=Math.random()*Object.keys(this.simon.buttons).length;return e=Math.floor(e),Object.keys(this.simon.buttons)[e]}}]),t}(Phaser.State);n.default=f},{"../prefabs/ParalaxMountains":3,"../prefabs/Simon":4}]},{},[1]);
